---
title: "Street Trees Independent Variables"
author: "Trini et al"
date: "`r format(Sys.Date())`"
output: html_document
---
This file contains independent variables for street tree data anaylsis 
Uses BNIA neighborhood delineations or Community Statistical Area (CSA)

# 0 set up
```{r include=FALSE}
# load packages

library(tidyverse)
library(sf) #simple features - vector GIS support
library(mapview) #quick web maps 
library(tidylog) #makes dplyr and tidyr verbose
library(dplyr)

#working directory
getwd()
list.files()
list.files('../../BaltimoreStreetTreeProject_Large_Data/')
list.files('../../BaltimoreStreetTreeProject_Large_Data/', recursive = TRUE)

#`%nin%` <- Negate(in)
```


Read in BNIA csv files with demographic data

#2 BNIA CSA race demographics ## use 2020
```{r include=FALSE}

# PercentAsian <-  
#   read_csv('../../BaltimoreStreetTreeProject_Large_Data\\Percent_of_Residents_-_Asian_(Non-Hispanic).csv') %>%   select(CSA2010, pasi20) %>% 
#   rename(PercAsian = pasi20)
# 
# PercentLatino <- 
#   read_csv('../../BaltimoreStreetTreeProject_Large_Data\\Percent_of_Residents_-_Hispanic.csv') %>% 
#   select(CSA2010, phisp20) %>% 
#   rename(PercLatino = phisp20)


PercentBlk <- 
  read_csv('../../BaltimoreStreetTreeProject_Large_Data\\Percent_of_Residents_-_Black_African-American_(Non-Hispanic).csv') %>% 
  select(CSA2010, paa20) %>% 
  rename(PercBlk = paa20)

PercentWhite <- 
  read_csv('../../BaltimoreStreetTreeProject_Large_Data\\Percent_of_Residents_-_White_Caucasian_(Non-Hispanic).csv') %>% 
  select(CSA2010, pwhite20) %>% 
  rename(PercWhite = pwhite20) 


```

#3 Total Population
```{r}
TotalPop <- 
  read_csv('../../BaltimoreStreetTreeProject_Large_Data\\Total_Population.csv') %>% 
  select(CSA2010, tpop20)
```

#4 Median income
```{r}
Income <- 
  read_csv('../../BaltimoreStreetTreeProject_Large_Data\\Median_Household_Income.csv') %>% 
  select(CSA2010, mhhi20) 
```

#5 Education - percent of population 25 and over with a Bachelor's Degree or above
```{r}
Edu <- 
  read_csv('../../BaltimoreStreetTreeProject_Large_Data\\Percent_Population_(25_Years_and_over)_with_a_Bachelor_s_Degree_or_Above.csv') %>% 
  select(CSA2010, bahigher19) 

```

#6 Temperature
```{r}
#read in temperature by neighborhood csv 
(temperature_by_neigh <- 
    read_csv('../input_data/NB_pm_temp_2023-08-09.csv' 
             , col_names = c('CSA2010', 'avg_temp', 'n_pixel'))
)

NBtemperature <- temperature_by_neigh %>% 
  select(-n_pixel)
```

#7 join all independent variables 
```{r}
IndVar <- PercentBlk %>% 
  left_join(PercentWhite, by = "CSA2010") %>%
  left_join(Income, by = "CSA2010") %>%
  left_join(Edu, by = "CSA2010") %>%  
  left_join(NBtemperature, by = "CSA2010")
  
write_csv(IndVar,'../input_data/Independent_variable.csv')  
```



